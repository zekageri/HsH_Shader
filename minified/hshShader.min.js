class hsShader extends HTMLElement{template='\n        <span class="hs-shader-upper"></span>\n        <span class="hs-shader-handle" draggable="true">\n            <span draggable="false" class="hs-shader-percent-holder noselect"></span>\n        </span>\n        <span class="hs-shader-name-wrap">\n            <span class="hs-shader-name"></span>\n        </span>\n    ';minHandleHeight=20;percent=50;handleHeight=25;reverseCompute=!1;isGroup=!1;notTeached=!0;handleEl=null;upperHalfEl=null;userEvents={drag:null,stop:null};connectedCallback(){this.id=this.getAttribute("id"),this.id&&""!==this.id?(this.cssRoot=document.querySelector(":root"),this.setHandleHeight(this.handleHeight),this.addTemplate(),this.getElements(),this.getAttributes(),this.addEvents()):console.error("[HSH-Shader] - Shader should have an ID.")}on(e,t){this.userEvents.hasOwnProperty(e)?this.userEvents[e]=t:console.error(`[HSH-Shader] - No such event as ${e}`)}setHandleHeight(e){this.handleHeight=e,this.handleHeight<this.minHandleHeight&&(this.handleHeight=this.minHandleHeight,console.error(`[HSH-Shader] - Minimum handle height is ${this.minHandleHeight}px!`)),this.cssRoot.style.setProperty("--hsh-shader-handle-height",`${this.handleHeight}px`)}getElements(){this.handleEl=this.querySelector(".hs-shader-handle"),this.upperHalfEl=this.querySelector(".hs-shader-upper"),this.percentHolderEl=this.querySelector(".hs-shader-percent-holder"),this.nameHolder=this.querySelector(".hs-shader-name")}getAttributes(){this.percent=parseInt(this.getAttribute("percent")),isNaN(this.percent)&&(this.percent=50),this.isGroup=this.classList.contains("group"),this.name=this.getAttribute("name"),this.notTeached=this.classList.contains("notTeached"),this.nameHolder.innerHTML=this.name,this.isGroup&&this.nameHolder.setAttribute("lang","groupShader"),setTimeout((()=>{this.refreshDisplayPercent()}),100)}addTemplate(){this.innerHTML=this.template}addEvents(){this.handleDrag()}handleDrag(){let e=this;["drag","touchmove"].forEach((t=>e.handleEl.addEventListener(t,(function(t){if(e.notTeached)return;const s=t.target.parentElement.getBoundingClientRect();let n;n="drag"==t.type?t.clientY-s.top:t.touches[0].pageY-s.top,e.updateDisplayPixel(n)}),!1))),["dragstart","touchstart","click"].forEach((t=>e.handleEl.addEventListener(t,(function(t){let s=e.handleEl.closest(".hshModalBody");if(s&&(s.style.overflow="hidden"),"click"!=t.type)return e.setAttribute("touching",!0),t.dataTransfer.setDragImage(document.createElement("span"),0,0),window.getSelection().removeAllRanges(),!1}),!1))),["dragend","touchend"].forEach((t=>e.handleEl.addEventListener(t,(function(t){null!==e.userEvents.stop&&e.userEvents.stop(e.percent);let s=e.handleEl.closest(".hshModalBody");return s&&(s.style.overflow="auto"),e.setAttribute("touching",!1),!1}),!1)))}scale(e,t,s,n,r){return(e-t)*(r-n)/(s-t)+n}getReversePercent(){return this.scale(this.percent,100,0,0,100)}getPosPixel(){return this.offsetHeight/100*this.percent-this.handleHeight/2}getPosPercent(e){let t=100/this.offsetHeight*e;return Math.round(t)}refreshDisplayPercent(){this.upperHalfEl.style.height=`${this.percent}%`,this.handleEl.style.top=`${this.getPosPixel()}px`,this.notTeached?this.percentHolderEl.innerText="-":this.percentHolderEl.innerText=`${this.percent}%`}updateDisplayPixel(e){if(e<0||e>this.offsetHeight)return;let t=this.getPosPercent(e);this.percent=t;let s=`${this.percent}%`;this.upperHalfEl.style.height=`${e}px`,this.handleEl.style.top=e-this.handleHeight/2+"px",this.percentHolderEl.innerText=s,null!==this.userEvents.drag&&this.userEvents.drag(this.percent)}setPercent(e){e>100||e<0?console.error("[HSH-Shader] - Percent must be between 0 and 100%!"):(this.percent=e,this.refreshDisplayPercent())}}function patchFireFoxEventHandler(){/Firefox\/\d+[\d\.]*/.test(navigator.userAgent)&&"function"==typeof window.DragEvent&&"function"==typeof window.addEventListener&&function(){var e,t,s,n,r,i,h,a,l,o;function d(d){e=d.clientX,t=d.clientY,s=d.pageX,n=d.pageY,r=d.offsetX,i=d.offsetY,h=d.screenX,a=d.screenY,l=d.layerX,o=d.layerY}function c(d){d._ffix_cx=e,d._ffix_cy=t,d._ffix_px=s,d._ffix_py=n,d._ffix_ox=r,d._ffix_oy=i,d._ffix_sx=h,d._ffix_sy=a,d._ffix_lx=l,d._ffix_ly=o}window.addEventListener("mousemove",d,!0),window.addEventListener("dragover",d,!0),window.addEventListener("dragstart",c,!0),window.addEventListener("drag",c,!0),window.addEventListener("dragend",c,!0);var p=Object.getOwnPropertyDescriptors(window.MouseEvent.prototype),f=Object.getOwnPropertyDescriptors(window.UIEvent.prototype);function g(e,t){return function(){return p[e]&&p[e].get.call(this)||Number(this[t])||0}}function u(e,t){return function(){return"dragover"===this.type&&f[e]?f[e].get.call(this):Number(this[t])||0}}Object.defineProperties(window.DragEvent.prototype,{clientX:{get:g("clientX","_ffix_cx")},clientY:{get:g("clientY","_ffix_cy")},pageX:{get:g("pageX","_ffix_px")},pageY:{get:g("pageY","_ffix_py")},offsetX:{get:g("offsetX","_ffix_ox")},offsetY:{get:g("offsetY","_ffix_oy")},screenX:{get:g("screenX","_ffix_sx")},screenY:{get:g("screenY","_ffix_sy")},x:{get:g("x","_ffix_cx")},y:{get:g("y","_ffix_cy")},layerX:{get:u("layerX","_ffix_lx")},layerY:{get:u("layerY","_ffix_ly")}})}()}customElements.define("hs-shader",hsShader),patchFireFoxEventHandler();